generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id          String      @id @default(cuid())
  email       String      @unique
  password    String
  name        String
  role        String      @default("STUDENT") // STUDENT, STAFF, or MASTER_ADMIN
  courseType  String?     // BTECH or POLYTECHNIC (only for students)
  department  String?     // COMPUTER_SCIENCE, CIVIL, MECHANICAL, EEE, AI, AUTOMOBILE (only for students)
  semester    Int?        // 1-8 for BTECH, 1-6 for POLYTECHNIC (only for students)
  createdAt   DateTime    @default(now())
  resetRequestedAt DateTime? // Track when password reset was requested
  
  submissions Submission[]
}

model Submission {
  id                  String    @id @default(cuid())
  title               String
  description         String?
  fileUrl             String
  fileType            String    // IMAGE or VIDEO
  status              String    @default("PENDING") // PENDING, APPROVED, REJECTED
  feedback            String?
  certificateFile     String?   // Uploaded certificate PDF filename
  createdAt           DateTime  @default(now())
  
  studentId           String
  student             User      @relation(fields: [studentId], references: [id])
}
